<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <title>{% block title %}Inmogestor{% endblock %}</title>
  {% load static %}
  {% block extra_head %}{% endblock %}
  <style>
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; margin: 16px; }
    nav a { text-decoration: none; margin-right: .6rem; }
    nav a:hover { text-decoration: underline; }
    .right { float: right; }
    .btn-link { background: none; border: none; color: #06c; cursor: pointer; padding: 0; font: inherit; }
    .messages { margin: .75rem 0; padding: 0; list-style: none; }
    .messages li { margin: .25rem 0; padding: .5rem .75rem; background: #f6f8fa; border: 1px solid #e5e7eb; border-radius: .375rem; }
  </style>
</head>
<body>
  {% load roles %}

  <nav>
    <a href="{% url 'core:home' %}">Inicio</a>

    {# Enlaces a paneles por grupo #}
    {% if user|in_group:"Propietarios" %}
      · <a href="{% url 'core:propietario_panel' %}">Mi panel de propietario</a>
    {% endif %}
    {% if user|in_group:"Inquilinos" %}
      · <a href="{% url 'core:inquilino_panel' %}">Mi panel de inquilino</a>
    {% endif %}

    {# Enlaces visibles solo si tiene permiso de ver el modelo #}
    {% if perms.core.view_inmueble %}
      · <a href="{% url 'core:inmueble_list' %}">Inmuebles</a>
    {% endif %}
    {% if perms.core.view_propietario %}
      · <a href="{% url 'core:propietario_list' %}">Propietarios</a>
    {% endif %}

    · <a href="/admin/">Admin</a>

    <span class="right">
      {% if user.is_authenticated %}
        {{ user.username }}
        <form method="post" action="{% url 'logout' %}" style="display:inline;">
          {% csrf_token %}
          <input type="hidden" name="next" value="{% url 'login' %}">
          <button type="submit" class="btn-link">Salir</button>
        </form>
      {% else %}
        <a href="{% url 'login' %}">Entrar</a>
      {% endif %}
    </span>
  </nav>

  <hr>

  {# Mensajes flash (opcionales, si usas django.contrib.messages) #}
  {% if messages %}
    <ul class="messages">
      {% for message in messages %}
        <li>{{ message }}</li>
      {% endfor %}
    </ul>
  {% endif %}

  {% block content %}{% endblock %}

  {% block extra_js %}{% endblock %}
</body>
</html>
